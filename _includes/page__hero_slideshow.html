{% capture overlay_img_path %}{{ page.header.overlay_image | relative_url }}{% endcapture %}

{% if page.header.overlay_filter contains "gradient" %}
{% capture overlay_filter %}{{ page.header.overlay_filter }}{% endcapture %}
{% elsif page.header.overlay_filter contains "rgba" %}
{% capture overlay_filter %}{{ page.header.overlay_filter }}{% endcapture %}
{% capture overlay_filter %}linear-gradient({{ overlay_filter }}, {{ overlay_filter }}){% endcapture %}
{% elsif page.header.overlay_filter %}
{% capture overlay_filter %}rgba(0, 0, 0, {{ page.header.overlay_filter }}){% endcapture %}
{% capture overlay_filter %}linear-gradient({{ overlay_filter }}, {{ overlay_filter }}){% endcapture %}
{% endif %}

{% if page.header.image_description %}
{% assign image_description = page.header.image_description %}
{% else %}
{% assign image_description = page.title %}
{% endif %}

{% assign image_description = image_description | markdownify | strip_html | strip_newlines | escape_once %}

<div class="hero-height page__hero--overlay" style="display: flex; flex-direction: column; justify-content: center; align-items: center; position: relative;">
  <div class="hero-slider">
    <img src="{{ 'assets/images/header.webp' | relative_url }}" alt="Astrid Grohe in Köln am Rhein, Yoga, Pilates, Meditation" class="slider-image">
    <img src="{{ 'assets/images/header1.webp' | relative_url }}" alt="Astrid Grohe in Köln am Rhein, Yoga, Pilates, Meditation" class="slider-image">
    <img src="{{ 'assets/images/header2.webp' | relative_url }}" alt="Astrid Grohe in Köln am Rhein, Yoga, Pilates, Meditation" class="slider-image">
    <img src="{{ 'assets/images/header3.webp' | relative_url }}" alt="Astrid Grohe in Köln am Rhein, Yoga, Pilates, Meditation" class="slider-image">
    <img src="{{ 'assets/images/header4.webp' | relative_url }}" alt="Astrid Grohe in Köln am Rhein, Yoga, Pilates, Meditation" class="slider-image">
    <img src="{{ 'assets/images/header5.webp' | relative_url }}" alt="Astrid Grohe in Köln am Rhein, Yoga, Pilates, Meditation" class="slider-image">
  </div>

  <!-- The overlay div that covers all the images -->
  <div class="overlay"></div>

  <div class="wrapper">
    <h1 id="page-title" class="page__title" itemprop="headline">
      {{ page.title | default: site.title | markdownify | remove: "<p>" | remove: "</p>" }}
    </h1>
    {% if page.header.show_overlay_excerpt != false and page.excerpt %}
    <p class="page__lead">{{ page.excerpt | markdownify | remove: "<p>" | remove: "</p>" }}</p>
    {% endif %}
    {% if page.header.actions %}
    <div style="text-align: center">
      <p>
        {% for action in page.header.actions %}
        <a href="{{ action.url | relative_url }}" class="btn btn--light-outline btn--large" {% if action.blank %} target="_blank" rel="noopener noreferrer nofollow"{% endif %}>{{ action.label | default: site.data.ui-text[site.locale].more_label | default: "Learn More" }}</a>
        {% endfor %}
    </div>
    {% endif %}
  </div>
</div>

<style>
  /* Hide all images initially */
  .hero-slider .slider-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0;
    transition: opacity 1s ease-in-out;
  }

  /* Make the first image visible */
  .hero-slider .slider-image:first-child {
    opacity: 1;
  }

  /* The overlay background above all the images */
  .overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.4); /* Slightly darken the images */
    z-index: 1; /* Keep the overlay above the images but below the text */
  }

  /* Text and other content should be above the images and overlay */
  .wrapper {
    z-index: 2; /* Ensure text and buttons are above the images and overlay */
    position: relative;
  }

  .page__title {
    transform: translateX(-50%) translateY(14.58rem);
  }

  @media (max-width: 767px) {
    .page__title {
      transform: translateX(-50%) translateY(12rem);
    }
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const images = document.querySelectorAll(".hero-slider .slider-image");
    let currentImageIndex = 0;

    function changeImage() {
      // Hide the current image
      images[currentImageIndex].style.opacity = 0;

      // Move to the next image, or loop back to the first image
      currentImageIndex = (currentImageIndex + 1) % images.length;

      // Show the next image
      images[currentImageIndex].style.opacity = 1;
    }

    // Change image every 4 seconds
    setInterval(changeImage, 4000);
  });
</script>
